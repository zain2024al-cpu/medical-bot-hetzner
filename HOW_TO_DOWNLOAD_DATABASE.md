# كيفية جلب قاعدة البيانات من السيرفر

## المشكلة
قاعدة البيانات المحلية تحتوي على 34 مستشفى، بينما السيرفر يحتوي على 38 مستشفى. يجب تحديث قاعدة البيانات المحلية.

## الطرق المتاحة

### الطريقة 1: استخدام السكريبت التلقائي (Python)
```bash
python download_db.py
```
- سينشئ نسخة احتياطية تلقائياً
- سيجلب قاعدة البيانات من السيرفر
- سيتحقق من المحتويات تلقائياً

### الطريقة 2: استخدام السكريبت التلقائي (Batch)
```bash
download_database_from_server.bat
```
- سينشئ نسخة احتياطية تلقائياً
- سيجلب قاعدة البيانات من السيرفر
- سيتحقق من المحتويات تلقائياً

### الطريقة 3: جلب يدوي باستخدام SCP
```bash
scp botuser@5.223.58.71:/home/botuser/medical-bot/db/medical_reports.db db/medical_reports.db
```
**كلمة المرور:** `bot123456`

### الطريقة 4: استخدام WinSCP أو FileZilla
1. افتح WinSCP أو FileZilla
2. اتصل بالسيرفر:
   - **Host:** 5.223.58.71
   - **Username:** botuser
   - **Password:** bot123456
   - **Port:** 22
3. انتقل إلى: `/home/botuser/medical-bot/db/`
4. حمّل ملف `medical_reports.db` إلى `db/medical_reports.db` محلياً

## ملاحظات مهمة

1. **قبل الجلب:** سيتم إنشاء نسخة احتياطية تلقائياً في `db/backups/`
2. **بعد الجلب:** استخدم `check_database_after_download.py` للتحقق من المحتويات
3. **إذا فشل الاتصال:** تأكد من:
   - الاتصال بالإنترنت
   - الاتصال بـ VPN إذا كان مطلوباً
   - صحة عنوان IP

## التحقق من قاعدة البيانات بعد الجلب

```bash
python check_database_after_download.py
```

يجب أن ترى:
- عدد المستشفيات: **38** (بدلاً من 34)
- عدد المرضى: (يجب أن يكون محدث)
- عدد الأقسام: (يجب أن يكون محدث)
- عدد الأطباء: (يجب أن يكون محدث)






