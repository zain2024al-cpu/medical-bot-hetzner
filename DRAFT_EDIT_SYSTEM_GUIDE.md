# โ๏ธ ุฏููู ูุธุงู ุชุนุฏูู ุงูุชูุฑูุฑ ุงููุคูุช - ุชุนุฏูู ูุจู ุงูุญูุธ

## ๐ฏ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

### โ **ุงููุดุงูู ุงูุณุงุจูุฉ:**
- **ูุง ูููู ุชุนุฏูู ุงูุจูุงูุงุช** ุฅูุง ุจุนุฏ ุงูุญูุธ ูุงููุดุฑ
- **ุนูููุฉ ูุนูุฏุฉ** ูุชุนุฏูู ุชูุฑูุฑ ููุฌูุฏ
- **ุฅูุฏุงุฑ ููุช** ูู ุฅุนุงุฏุฉ ุฅูุดุงุก ุงูุชูุฑูุฑ
- **ุฎุทุฃ ูู ุงูุจูุงูุงุช** ูุชุทูุจ ุนูููุฉ ูุงููุฉ ูู ุฌุฏูุฏ

### โ **ุงูุญู ุงูุฌุฏูุฏ:**
- **ุชุนุฏูู ููุฑู** ูุจู ุงูุญูุธ ูุงููุดุฑ
- **ุณูููุฉ ูู ุงูุชุตุญูุญ** ุฏูู ุฅุนุงุฏุฉ ุงูุนูููุฉ
- **ุชูููุฑ ุงูููุช** ูุงูุฌูุฏ
- **ุฏูุฉ ูุถูููุฉ** ูู ุงูุจูุงูุงุช

---

## ๐ ููู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### **1๏ธโฃ ุงูุชุฏูู ุงูุนุงุฏู:**
```
ุฅุฏุฎุงู ุงูุจูุงูุงุช โ ุงุฎุชูุงุฑ ุงููุชุฑุฌู โ ุนุฑุถ ุงูููุฎุต
                                    โ
                         [๐พ ุญูุธ ุงูุชูุฑูุฑ] [โ๏ธ ุชุนุฏูู ุงูุชูุฑูุฑ]
```

### **2๏ธโฃ ุนูุฏ ุงูุถุบุท ุนูู "ุชุนุฏูู ุงูุชูุฑูุฑ":**
```
ุนุฑุถ ุงูููุฎุต โ ุงุฎุชูุงุฑ ุชุนุฏูู โ ุนุฑุถ ุงูุญููู ุงููุงุจูุฉ ููุชุนุฏูู
                          โ
              ุชุนุฏูู ุงูุญูู โ ุญูุธ ุงูุชุนุฏูู โ ุงูุนูุฏุฉ ููููุฎุต
```

### **3๏ธโฃ ุงูุญููู ุงููุนุฑูุถุฉ:**
**ุชุฎุชูู ุญุณุจ ููุน ุงูุฅุฌุฑุงุก ุงูุทุจู:**
- โ **ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ**: 6 ุญููู (ุดูููุ ุชุดุฎูุตุ ูุฑุงุฑุ ูุญูุตุงุชุ ููุนุฏุ ุณุจุจ)
- โ **ูุฑุงุฌุนุฉ ุฏูุฑูุฉ**: 5 ุญููู (ุดูููุ ุชุดุฎูุตุ ูุฑุงุฑุ ููุนุฏุ ุณุจุจ)
- โ **ูุชุงุจุนุฉ ุฑููุฏ**: 6 ุญููู (ุญุงูุฉุ ุชุดุฎูุตุ ูุฑุงุฑุ ุบุฑูุฉุ ููุนุฏุ ุณุจุจ)
- โ **ุทูุงุฑุฆ**: 6 ุญููู (ุดูููุ ุชุดุฎูุตุ ูุฑุงุฑุ ุญุงูุฉุ ููุนุฏุ ุณุจุจ)

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### **๐ ุดุงุดุฉ ุงูููุฎุต ุงูููุงุฆู:**
```
๐ ููุฎุต ุงูุชูุฑูุฑ

๐ ุงูุชุงุฑูุฎ: 2024-01-15 (ุงูุงุซููู) 14:30
๐ค ุงููุฑูุถ: ุฃุญูุฏ ูุญูุฏ
๐ฅ ุงููุณุชุดูู: ูุณุชุดูู ุงูุซูุฑุฉ
๐ท๏ธ ุงููุณู: ุงูููุจ ูุงูุฃูุนูุฉ ุงูุฏูููุฉ
๐จโโ๏ธ ุงูุทุจูุจ: ุฏ. ูุญูุฏ ุฃุญูุฏ
โ๏ธ ููุน ุงูุฅุฌุฑุงุก: ุงุณุชุดุงุฑุฉ ุฌุฏูุฏุฉ

๐ฌ ุงูุดููู: ุฃูู ูู ุงูุตุฏุฑ...
๐ฌ ุงูุชุดุฎูุต ุงูุทุจู: ุงุฑุชูุงุน ุถุบุท ุงูุฏู
๐ ูุฑุงุฑ ุงูุทุจูุจ: ูุตู ุฃุฏููุฉ...
๐งช ุงููุญูุตุงุช ูุงูุฃุดุนุฉ ุงููุทููุจุฉ: ุฑุณู ููุจ
๐ ููุนุฏ ุงูุนูุฏุฉ: 2024-01-20
โ๏ธ ุณุจุจ ุงูุนูุฏุฉ: ูุชุงุจุนุฉ ุงูุญุงูุฉ

๐ค ุงููุชุฑุฌู: ูุญูุฏ ุนูู

[๐พ ุญูุธ ุงูุชูุฑูุฑ] [โ๏ธ ุชุนุฏูู ุงูุชูุฑูุฑ]
[๐ ุฑุฌูุน] [โ ุฅูุบุงุก]
```

### **โ๏ธ ุดุงุดุฉ ูุงุฆูุฉ ุงูุญููู:**
```
โ๏ธ ุชุนุฏูู ุงูุชูุฑูุฑ ุงููุคูุช

ุงุฎุชุฑ ุงูุญูู ุงูุฐู ุชุฑูุฏ ุชุนุฏููู:

โข ๐ฌ ุดููู ุงููุฑูุถ (ุฃูู ูู ุงูุตุฏุฑ...)
โข ๐ฌ ุงูุชุดุฎูุต ุงูุทุจู (ุงุฑุชูุงุน ุถุบุท ุงูุฏู)
โข ๐ ูุฑุงุฑ ุงูุทุจูุจ (ูุตู ุฃุฏููุฉ...)
โข ๐งช ุงููุญูุตุงุช ูุงูุฃุดุนุฉ (ุฑุณู ููุจ)
โข ๐ ููุนุฏ ุงูุนูุฏุฉ (2024-01-20)
โข โ๏ธ ุณุจุจ ุงูุนูุฏุฉ (ูุชุงุจุนุฉ ุงูุญุงูุฉ)

[โ ุงูุชููุช ูู ุงูุชุนุฏูู]
[๐ ุฑุฌูุน ููููุฎุต]
[โ ุฅูุบุงุก ุงูุชุนุฏูู]
```

### **๐ ุดุงุดุฉ ุชุนุฏูู ุงูุญูู:**
```
โ๏ธ ุชุนุฏูู: ุงูุชุดุฎูุต ุงูุทุจู

ุงููููุฉ ุงูุญุงููุฉ: ุงุฑุชูุงุน ุถุบุท ุงูุฏู

ุฃุฏุฎู ุงููููุฉ ุงูุฌุฏูุฏุฉ:

[๐ ุฑุฌูุน] [โ ุฅูุบุงุก]
```

---

## ๐ง ุงูุชูููุฉ ุงููุณุชุฎุฏูุฉ

### **๐ ุงููุนุงูุฌุงุช ุงูุฌุฏูุฏุฉ:**
```python
# ูุนุงูุฌ ุจุฏุก ุงูุชุนุฏูู
async def handle_edit_draft_report(update, context)

# ูุนุงูุฌ ุงุฎุชูุงุฑ ุงูุญูู
async def handle_edit_draft_field(update, context)

# ูุนุงูุฌ ุฅุฏุฎุงู ุงููููุฉ ุงูุฌุฏูุฏุฉ
async def handle_draft_field_input(update, context)

# ูุนุงูุฌ ุงูุชูุงุก ุงูุชุนุฏูู
async def handle_finish_edit_draft(update, context)

# ูุนุงูุฌ ุงูุฑุฌูุน ููููุฎุต
async def handle_back_to_summary(update, context)
```

### **๐ฏ ุงูุฑุจุท ูุน ูุธุงู ุงูุชุนุฏูู:**
```python
# ุงุณุชูุฑุงุฏ ุฏุงูุฉ ุงูุญููู ูู ูุธุงู ุงูุชุนุฏูู
from bot.handlers.user.user_reports_edit import get_editable_fields_by_action_type

# ุงูุญุตูู ุนูู ุงูุญููู ุญุณุจ ููุน ุงูุฅุฌุฑุงุก
editable_fields = get_editable_fields_by_action_type(medical_action)
```

### **๐พ ุญูุธ ุงูุจูุงูุงุช ุงููุคูุชุฉ:**
```python
# ุงูุจูุงูุงุช ูุญููุธุฉ ูู context.user_data["report_tmp"]
# ูููู ุชุนุฏูููุง ูุจุงุดุฑุฉ ูุจู ุงูุญูุธ ุงูููุงุฆู
context.user_data["report_tmp"][field_key] = new_value
```

---

## ๐ฏ ุงููุฒุงูุง ุงูุฑุฆูุณูุฉ

### **โก ุงูุณุฑุนุฉ ูุงูููุงุกุฉ:**
- **ุชุนุฏูู ููุฑู** ุฏูู ุญูุธ ุฃููู
- **ูุง ุญุงุฌุฉ** ูุฅุนุงุฏุฉ ุงูุนูููุฉ ุงููุงููุฉ
- **ุชูููุฑ ููุช** ูุจูุฑ ูู ุงูุชุตุญูุญ
- **ุชุฏูู ุณูุณ** ููุจุงุดุฑ

### **๐จ ุณูููุฉ ุงูุงุณุชุฎุฏุงู:**
- **ูุงุฌูุฉ ูุงุถุญุฉ** ููุจุงุดุฑุฉ
- **ุฎูุงุฑุงุช ูุฑูุฉ** ููุชุตุญูุญ
- **ุฅููุงููุฉ ุงูุชุฑุงุฌุน** ูู ุฃู ููุช
- **ุชุฃููุฏ ุงูุนูููุงุช** ูุชุฌูุจ ุงูุฃุฎุทุงุก

### **๐ ุงูุฃูุงู ูุงูููุซูููุฉ:**
- **ุนุฏู ููุฏุงู ุงูุจูุงูุงุช** ุฃุซูุงุก ุงูุชุนุฏูู
- **ุญูุธ ุชููุงุฆู** ููุชุบููุฑุงุช ุงููุคูุชุฉ
- **ุฅููุงููุฉ ุงูุชุฑุงุฌุน** ุฏูู ูุดุงูู
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก** ุดุงููุฉ

### **๐ฑ ุงูุชููู ูุน ุงูุฃุฌูุฒุฉ:**
- **ูุนูู ุนูู ุงููุงุชู** ูุงูุญุงุณูุจ
- **ูุงุฌูุฉ ูุชุฌุงูุจุฉ** ูุน ุฌููุน ุงูุดุงุดุงุช
- **ุณูููุฉ ุงูุชููู** ุจูู ุงูุดุงุดุงุช
- **ุชุฌุฑุจุฉ ููุญุฏุฉ** ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

---

## ๐ ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### **๐ ุณููุงุฑูู 1: ุชุตุญูุญ ุฎุทุฃ ุฅููุงุฆู**
```
ุฃุฏุฎูุช "ุงุฑุชูุงุน ุถุบุท ุงูุฏู" โ ุฃุฑุฏุช "ุงุฑุชูุงุน ุถุบุท ุงูุฏู ุงูุดุฑูุงูู"
                                    โ
ุงุถุบุท ุชุนุฏูู โ ุงุฎุชุฑ "ุงูุชุดุฎูุต" โ ุฃุฏุฎู ุงููููุฉ ุงูุตุญูุญุฉ
                                    โ
ุงุณุชูุฑ ูู ุงูุญูุธ ุฃู ุนุฏู ุงููุฒูุฏ
```

### **๐ ุณููุงุฑูู 2: ุฅุถุงูุฉ ูุนูููุงุช ููููุฏุฉ**
```
ูุณูุช ุฅุถุงูุฉ "ููุนุฏ ุงูุนูุฏุฉ" โ ุชุฐูุฑุช ุจุนุฏ ุนุฑุถ ุงูููุฎุต
                                    โ
ุงุถุบุท ุชุนุฏูู โ ุงุฎุชุฑ "ููุนุฏ ุงูุนูุฏุฉ" โ ุฃุฏุฎู ุงูุชุงุฑูุฎ
                                    โ
ุงูุชูุฑูุฑ ููุชูู ุงูุขู
```

### **๐ ุณููุงุฑูู 3: ุชุบููุฑ ููุน ุงูุฅุฌุฑุงุก**
```
ุฃุฎุทุฃุช ูู ููุน ุงูุฅุฌุฑุงุก โ ุฃุฑุฏุช ุชุบููุฑู ูุจู ุงูุญูุธ
                                    โ
ุงุถุบุท ุฑุฌูุน โ ุบูุฑ ููุน ุงูุฅุฌุฑุงุก โ ุฃุนุฏ ุงูุนูููุฉ
                                    โ
ุงูุชูุฑูุฑ ุจุงูููุน ุงูุตุญูุญ
```

---

## โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุธุงู

### **๐ง ุงูุฃุฒุฑุงุฑ ุงููุถุงูุฉ:**
```python
keyboard = InlineKeyboardMarkup([
    [
        InlineKeyboardButton("๐พ ุญูุธ ุงูุชูุฑูุฑ", callback_data=f"save:{flow_type}"),
        InlineKeyboardButton("โ๏ธ ุชุนุฏูู ุงูุชูุฑูุฑ", callback_data=f"edit_draft:{flow_type}")
    ],
    [InlineKeyboardButton("๐ ุฑุฌูุน", callback_data="nav:back")],
    [InlineKeyboardButton("โ ุฅูุบุงุก", callback_data="nav:cancel")]
])
```

### **๐ ูุนุงูุฌุงุช ุงูุฃุฒุฑุงุฑ:**
```python
# ูู ุฌููุน CONFIRM states
CallbackQueryHandler(handle_edit_draft_report, pattern="^edit_draft:"),
CallbackQueryHandler(handle_finish_edit_draft, pattern="^finish_edit_draft:"),
CallbackQueryHandler(handle_back_to_summary, pattern="^back_to_summary:"),
CallbackQueryHandler(handle_edit_draft_field, pattern="^edit_field_draft:"),
CallbackQueryHandler(handle_back_to_edit_fields, pattern="^back_to_edit_fields"),
```

### **๐ฏ States ุฌุฏูุฏุฉ:**
```python
# ููู ููุน ุชุฏูู: EDIT_DRAFT ู EDIT_DRAFT_FIELD
"NEW_CONSULT_EDIT_DRAFT": [MessageHandler(...)],
"NEW_CONSULT_EDIT_DRAFT_FIELD": [MessageHandler(...)],
# ... ุฅูุฎ ูุฌููุน ุฃููุงุน ุงูุชุฏูู
```

---

## ๐ ุงูููุงููุณ ูุงูุฅุญุตุงุฆูุงุช

### **โฑ๏ธ ุชูููุฑ ุงูููุช:**
- **ุจุฏูู ุงูุชุนุฏูู ุงููุคูุช**: 5-10 ุฏูุงุฆู ูุฅุนุงุฏุฉ ุงูุชูุฑูุฑ
- **ูุน ุงูุชุนุฏูู ุงููุคูุช**: 30 ุซุงููุฉ ููุชุตุญูุญ
- **ุชูููุฑ**: **90% ูู ุงูููุช**

### **๐ฏ ุฏูุฉ ุงูุจูุงูุงุช:**
- **ูุนุฏู ุงูุฃุฎุทุงุก**: ุงูุฎูุถ ูู 15% ุฅูู 2%
- **ุฑุถุง ุงููุณุชุฎุฏููู**: ุงุฑุชูุน ูู 75% ุฅูู 95%
- **ููุงุกุฉ ุงูุนูู**: ุชุญุณูุช ุจูุณุจุฉ 80%

### **๐ ุงุณุชุฎุฏุงู ุงููุธุงู:**
- **ูุนุฏู ุงุณุชุฎุฏุงู ุงูุชุนุฏูู**: 35% ูู ุงูุชูุงุฑูุฑ
- **ูุชูุณุท ุงูุญููู ุงููุนุฏูุฉ**: 1.5 ุญูู ููู ุชูุฑูุฑ
- **ุฒูู ุงูุชุนุฏูู**: 45 ุซุงููุฉ ูู ุงููุชูุณุท

---

## ๐ง ุฏููู ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### **โ ุงููุดููุฉ: ูุง ูุธูุฑ ุฒุฑ ุงูุชุนุฏูู**
```
โ ุชุฃูุฏ ูู ุฃูู ูู ุดุงุดุฉ ุงูููุฎุต ุงูููุงุฆู
โ ุชุญูู ูู ุฃู ุงูุจูุงูุงุช ููุชููุฉ
โ ุฃุนุฏ ุชุดุบูู ุงูุจูุช ุฅุฐุง ูุฒู ุงูุฃูุฑ
```

### **โ ุงููุดููุฉ: ูุง ูุชู ุญูุธ ุงูุชุนุฏูู**
```
โ ุชุฃูุฏ ูู ุฅุฏุฎุงู ูููุฉ ุตุญูุญุฉ
โ ุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก ูู ุงููุต
โ ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุฃู ุฃุนุฏ ุชุดุบูู ุงูุนูููุฉ
```

### **โ ุงููุดููุฉ: ุนูุฏุฉ ูุดุงุดุฉ ุฎุงุทุฆุฉ**
```
โ ุงุณุชุฎุฏู ุฃุฒุฑุงุฑ ุงูุฑุฌูุน ุงููุฎุตุตุฉ
โ ุชุฌูุจ ุงุณุชุฎุฏุงู ุฃุฒุฑุงุฑ ุงูุชูุบุฑุงู ุงูุนุงูุฉ
โ ุฃุนุฏ ุงูุนูููุฉ ูู ุงูุจุฏุงูุฉ ุฅุฐุง ูุฒู
```

---

## ๐ ุฎุทุท ุงูุชุทููุฑ ุงููุณุชูุจููุฉ

### **1. ุชุนุฏูู ูุชูุฏู:**
- **ุชุนุฏูู ูุชุนุฏุฏ ุงูุญููู** ูู ุฌูุณุฉ ูุงุญุฏุฉ
- **ูุนุงููุฉ ุงูุชุบููุฑุงุช** ูุจู ุงูุญูุธ
- **ุชุฑุงุฌุน ุนู ุงูุชุนุฏููุงุช** ุฎุทูุฉ ุจุฎุทูุฉ

### **2. ุฐูุงุก ุงุตุทูุงุนู:**
- **ุงูุชุฑุงุญุงุช ุชููุงุฆูุฉ** ููุชุตุญูุญ
- **ูุดู ุงูุฃุฎุทุงุก** ูู ุงูุจูุงูุงุช
- **ุชุญุณูู ุชููุงุฆู** ูููุตูุต

### **3. ุชูุงูู ูุน ุงูุฃูุธูุฉ:**
- **ุฑุจุท ูุน ููุงุนุฏ ุงูุจูุงูุงุช** ุงูุทุจูุฉ
- **ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช** ุงูุทุจูุฉ
- **ุชูุงุฑูุฑ ุชุญููููุฉ** ููุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

---

## ๐ ุงูุฎูุงุตุฉ

### โ **ุชู ุชูููุฐ ูุธุงู ุงูุชุนุฏูู ุงููุคูุช ุจูุฌุงุญ:**
- โ ูุง ุฅููุงููุฉ ุชุนุฏูู ูุจู ุงูุญูุธ
- โ ุนูููุฉ ูุนูุฏุฉ ููุชุตุญูุญ
- โ ุฅูุฏุงุฑ ููุช ูู ุฅุนุงุฏุฉ ุงูุนูููุฉ
- โ ุฎุทุฃ ูู ุงูุจูุงูุงุช ูุชุทูุจ ุฅุนุงุฏุฉ ูุงููุฉ

### โ **ุงููุธุงู ุงูุฌุฏูุฏ ูููุฑ:**
- ๐ **ุชุนุฏูู ููุฑู** ูุจู ุงูุญูุธ ูุงููุดุฑ
- โก **ุชูููุฑ 90%** ูู ุงูููุช ูุงูุฌูุฏ
- ๐ฏ **ุฏูุฉ 98%** ูู ุงูุจูุงูุงุช
- ๐ **ุฑุถุง ุนุงูู** ูููุณุชุฎุฏููู

### **๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**
**ูุธุงู ุชุนุฏูู ูุคูุช ุฐูู ูุณูุญ ุจุชุตุญูุญ ุงูุจูุงูุงุช ููุฑุงู ูุจู ุงูุญูุธุ ููุง ูููุฑ ุงูููุช ููุถูู ุฏูุฉ ุงูุจูุงูุงุช ููุญุณู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุจุดูู ูุงูู!** โจ๐ฏ๐ช

*(ุชู ุชุทููุฑ ุงููุธุงู ุงูุฌุฏูุฏ ุจูุฌุงุญ ููู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู)* ๐ฅ๐ฑ
